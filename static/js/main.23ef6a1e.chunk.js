(this["webpackJsonpkirtee-app"]=this["webpackJsonpkirtee-app"]||[]).push([[0],{41:function(e,t,a){e.exports=a(73)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"AddFavouriteBeers",(function(){return J})),a.d(r,"RemoveFavourites",(function(){return P})),a.d(r,"DataFetchFailure",(function(){return H})),a.d(r,"AddFavourites",(function(){return q}));var n=a(0),c=a.n(n),s=a(19),o=a.n(s),l=a(13),i=a(6),u=(a(38),a(24)),m=a(16),d=a(11),p={favouriteBeers:[],error:null};var h=Object(i.c)({favouriteBeersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"favouriteBeers/add":return Object(d.a)({},e,{favouriteBeers:[].concat(Object(m.a)(e.favouriteBeers),[t.payload])});case"favouriteBeers/remove":return Object(d.a)({},e,{favouriteBeers:e.favouriteBeers.filter((function(e){return e.id!==t.payload}))});case"favouriteBeers/error":return Object(d.a)({},e,{error:t.payload});default:return Object(d.a)({},e)}}}),f=(0,i.d)(Object(i.a)(u.a)),v=Object(i.e)(h,f),b=(a(50),a(51),a(52),a(53),a(17)),E=a(1),g=a(3),O=Object(g.a)(),j=a(2),B=a.n(j),x=a(12),y=a(7),N=a(8),k=a(9),w=a(10),_=a(39),C=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).handleTextChange=function(e){r.setState({searchText:e.target.value})},r.search=function(e){e.preventDefault(),r.props.setSearchText(r.state.searchText)},r.state={searchText:""},r}return Object(N.a)(a,[{key:"render",value:function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header__top"},c.a.createElement("ul",{className:"nav"},c.a.createElement("li",null,c.a.createElement(b.b,{to:"/",title:"home"},"Home")),c.a.createElement("li",null,c.a.createElement(b.b,{to:"/favourites",title:"favourites"},"Favourites")))),c.a.createElement("div",{className:"header__bottom"},c.a.createElement("h1",null,"The Beer Bank"),c.a.createElement("span",null,"Find your favourite beer"),c.a.createElement("form",{onSubmit:this.search},c.a.createElement("input",{type:"search",placeholder:"Search beer name",onChange:this.handleTextChange,value:this.state.searchText})))))}}]),a}(n.Component),F=function(){return c.a.createElement("div",{className:"spinner"},c.a.createElement("div",{className:"rect1"}),c.a.createElement("div",{className:"rect2"}),c.a.createElement("div",{className:"rect3"}),c.a.createElement("div",{className:"rect4"}),c.a.createElement("div",{className:"rect5"}))},M=function(e){var t=e.show,a=e.handleClose,r=e.children;return c.a.createElement("div",{className:"modal ".concat(t?"display-block":"display-none")},c.a.createElement("section",{className:"modal-main"},c.a.createElement("button",{className:"btn",onClick:a},c.a.createElement("i",{className:"fa fa-times"})),r))},S=a(21),T=a.n(S);T.a.settings({timeout:4e3,progressBarColor:"white"});var I=function(e){var t=e.title,a=e.message;console.log("error",t,a),T.a.show({title:t,message:a,backgroundColor:"#ff0000",timeout:6e3})},D=a(40),R={baseUri:"https://api.punkapi.com/v2"},L=a.n(D).a.create({baseURL:R.baseUri,headers:{"Content-Type":"application/json"}}),U=function(){var e=Object(x.a)(B.a.mark((function e(){var t,a,r,n,c,s=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{page:2,size:10},a=s.length>1?s[1]:void 0,r={page:t.page,per_page:t.size},a&&(r.beer_name=a),e.next=6,L.get("/beers",{params:r});case 6:return n=e.sent,c=n.data,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(B.a.mark((function e(t){var a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/beers/".concat(t));case 2:return a=e.sent,r=a.data,console.log(r),e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).fetchBeer=Object(x.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(r.props.beerId);case 3:t=e.sent,r.setState({beer:t,isLoading:!1}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.response.data.message||"Error occured!!",I({title:"Oh no!",message:a});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),r.state={isLoading:!0,beer:{}},r}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.fetchBeer()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.beer,r=this.props,n=r.handleClose,s=r.show,o=a.image_url,l=a.description,i=a.name,u=a.tagline,m=a.ibu,d=a.abv,p=a.ebc,h=a.food_pairing;return console.log(o),c.a.createElement(M,{show:s,handleClose:n},t?c.a.createElement(F,null):c.a.createElement("div",{className:"DescriptionModal clearfix"},c.a.createElement("div",null,c.a.createElement("div",{className:"DescriptionModal__left"},c.a.createElement("div",{className:"DescriptionModal__left__imgcontainer",style:{backgroundImage:"url(".concat(a.image_url,")")}})),c.a.createElement("div",{className:"DescriptionModal__right"},c.a.createElement("div",null,c.a.createElement("h2",null,i),c.a.createElement("span",{className:"DescriptionModal__right__title"},u),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("span",{className:"bold"},"IBU: ",m)),c.a.createElement("li",null,c.a.createElement("span",{className:"bold"},"IBU: ",d)),c.a.createElement("li",null,c.a.createElement("span",{className:"bold"},"IBU: ",p))),c.a.createElement("p",null,l),!!h.length&&c.a.createElement("div",{className:"DescriptionModal__right__list"},c.a.createElement("span",null,"Best served with: "),c.a.createElement("ul",null,h.map((function(e,t){return c.a.createElement("li",{key:e}," ",e," ")})))))))))}}]),a}(n.Component),J=function(e){return{type:"favouriteBeers/add",payload:e}},P=function(e){return{type:"favouriteBeers/remove",payload:e}},H=function(e){return{type:"favouriteBeers/error",payload:e}},q=function(e){return function(){var t=Object(x.a)(B.a.mark((function t(a){var r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e.id);case 3:r=t.sent,console.log(r),a(J(e)),a(H(null)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(H(t.t0.response.data.data[0].msg));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).handleModalOpen=function(){r.setState({showModal:!0})},r.handleModalClose=function(){r.setState({showModal:!1})},r.toggleFavourites=function(){var e=r.props,t=e.favouriteBeers,a=e.AddFavourites,n=e.RemoveFavourites,c=e.info;t.findIndex((function(e){return e.id===c.id}))>-1?n(c.id):a(c)},r.state={showModal:!1},r}return Object(N.a)(a,[{key:"render",value:function(){var e=this.state.showModal,t=this.props.info,a=t.id,r=t.name,s=t.description,o=t.image_url,l=this.props.favouriteBeers.findIndex((function(e){return e.id===a}));return c.a.createElement(n.Fragment,null,e?c.a.createElement(z,{show:e,handleClose:this.handleModalClose,beerId:a}):null,c.a.createElement("div",{className:"card"},c.a.createElement("span",{className:"favourite ".concat(l>-1?"active":"")},c.a.createElement("i",{className:"".concat(l>-1?"fas":"far"," fa-star"),onClick:this.toggleFavourites})),c.a.createElement("div",{className:"card__imgcontainer",style:{backgroundImage:"url(".concat(o,")")}}),c.a.createElement("h2",{onClick:this.handleModalOpen},r),c.a.createElement("span",{className:"card__description"},s)))}}]),a}(n.Component),K=Object(l.b)((function(e){return{favouriteBeers:e.favouriteBeersReducer.favouriteBeers}}),(function(e){return Object(d.a)({},Object(i.b)(Object(d.a)({},r),e))}))(G),Q=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).scrollParentRef=null,r.setSearchText=function(e){r.setState({searchFor:e,hasFilter:!0},(function(){r.fetchBeers()}))},r.fetchBeers=Object(x.a)(B.a.mark((function e(){var t,a,n,c,s,o,l;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=r.state,a=t.beers,n=t.searchFor,c=t.hasFilter,s=r.state.pageInfo,c&&(s.page=1),e.next=6,U(s,n);case 6:o=e.sent,r.setState({beers:c?o:[].concat(Object(m.a)(a),Object(m.a)(o)),pageInfo:Object(d.a)({},s,{page:o.length?s.page+1:s.page}),hasMore:!!o.length,hasFilter:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l=e.t0.response.data.message||"something went wrong",I({title:"Error!",message:l});case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),r.state={beers:[],pageInfo:{page:1,size:25},hasMore:!0,searchFor:"",hasFilter:!1},r}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.fetchBeers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.beers,r=t.hasMore;return console.log(this.props),c.a.createElement("div",null,c.a.createElement(C,{setSearchText:this.setSearchText}),c.a.createElement("main",null,c.a.createElement("div",{className:"container",ref:function(t){return e.scrolParentRef=t}},!!this.props.error&&c.a.createElement("div",{style:{backgroundColor:"red",width:"100%",padding:"10px",textAlign:"center"}},this.props.error),c.a.createElement(_.a,{dataLength:a.length,next:this.fetchBeers,hasMore:r,loader:r?c.a.createElement(F,null):null},a.map((function(e){return c.a.createElement(K,{key:e.id,info:e})}))))))}}]),a}(n.Component),V=Object(l.b)((function(e){return{error:e.favouriteBeersReducer.error}}))(Q),W=function(){return c.a.createElement("div",{className:"wrapper"},c.a.createElement(V,null))},X=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).setSearchText=function(e){r.setState({searchFor:e})},r.state={searchFor:""},r}return Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.props.favouriteBeers;return this.state.searchFor&&(t=t.filter((function(t){return t.name.toLowerCase().includes(e.state.searchFor.toLowerCase())}))),c.a.createElement("div",{className:"wrapper"},c.a.createElement(C,{setSearchText:this.setSearchText}),c.a.createElement("main",null,c.a.createElement("div",{className:"container"},!!t.length&&t.map((function(e){return c.a.createElement(K,{key:e.id,info:e})})))))}}]),a}(n.Component),Y=Object(l.b)((function(e){return{favouriteBeers:e.favouriteBeersReducer.favouriteBeers}}))(X),Z=function(){return c.a.createElement(b.a,{history:O},c.a.createElement(E.c,null,c.a.createElement(E.a,{exact:!0,path:"/favourites",component:Y}),c.a.createElement(E.a,{path:"/",component:W})))};var $=function(){return c.a.createElement(Z,null)};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:v},c.a.createElement($,null))),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.23ef6a1e.chunk.js.map